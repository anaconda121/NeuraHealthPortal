{% block content %}

<!DOCTYPE html>
<html style="font-size: 16px;">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="Work &amp;amp;, Travel">
    <meta name="description" content="">
    <meta name="page_type" content="np-template-header-footer-from-plugin">
    <title>Predict!</title>
    <link rel="stylesheet" href="../../static/css/nicepage.css?version=1" media="screen">
    <link rel="stylesheet" href="../../static/css/output.css?version=1" media="screen">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <script class="u-script" type="text/javascript" src="../../static/js/jquery-1.9.1.min.js" defer=""></script>
    <script class="u-script" type="text/javascript" src="../../static/js/nicepage.js" defer=""></script>
    <!-- <script class="u-script" type="text/javascript" src="../../static/js/output.js" defer=""></script> -->
    <!-- <meta name="generator" content="Nicepage 4.2.22, nicepage.com"> -->
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Oswald:200,300,400,500,600,700|Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i">
    <link id="u-page-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700,700i|Roboto+Condensed:300,300i,400,400i,700,700i|Oswald:200,300,400,500,600,700">
    
    
    <script>
      function dateTime(){
        var currentdate = new Date(); 
        var datetime = "<b>Time Generated</b>: " + currentdate.getDate() + "/"
                + (currentdate.getMonth()+1)  + "/" 
                + currentdate.getFullYear() + " @ "  
                + currentdate.getHours() + ":"  
                + currentdate.getMinutes() + ":" 
                + currentdate.getSeconds();
        document.getElementById("date-time").innerHTML = datetime;
      }

      function probBar(){
        var percent_ci = document.getElementById("p-bar");
        console.log(percent_ci.innerHTML);
        percent_ci = percent_ci.innerHTML;
        percent_ci = parseInt(percent_ci);
        console.log(percent_ci);
    
        document.getElementById("p-bar").style.width = `${percent_ci}%`;

        if (percent_ci >= 60) {
          document.getElementById("p-bar").style.backgroundColor = "red";
          document.getElementById("model-rec").innerHTML = "Patient is highly likely of having cognitive impairment. Seek treatment from your local hospital.";
        } else if (percent_ci >= 40) {
          document.getElementById("p-bar").style.backgroundColor = "orange";
          document.getElementById("model-rec").innerHTML = "Patient may or may not have cognitive impairment. Checkup with doctor for further evaluation is highly recommended.";
        } else {
          document.getElementById("p-bar").style.backgroundColor = "green";
          document.getElementById("model-rec").innerHTML = "Patient currently does not show signs of having cognitive impariment. Regular checkups with doctor are advised for monitoring.";
        }
      }
          
      window.onload  = function() {
        setTimeout(probBar,0);
        setTimeout(dateTime,0);
      }
  
    </script>

    <meta name="theme-color" content="#478ac9">
    <meta property="og:title" content="Page 5">
    <meta property="og:type" content="website">
  </head>
  <body class="u-body"><header class="u-clearfix u-header u-palette-5-light-2 u-header" id="sec-8229"><div class="u-align-left u-clearfix u-sheet u-sheet-1">
        <h3 class="u-align-left-xs u-headline u-text u-text-1">
          <a href="/">NeuraHealth</a>
        </h3>
        <nav class="u-menu u-menu-dropdown u-offcanvas u-menu-1" data-responsive-from="XL">
          <div class="menu-collapse">
            <a class="u-button-style u-nav-link" href="#" style="font-size: calc(1em + 8px);">
              <svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 302 302" style="undefined"><use xlink:href="#svg-a760"></use></svg>
              <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="svg-a760" x="0px" y="0px" viewBox="0 0 302 302" style="enable-background:new 0 0 302 302;" xml:space="preserve" class="u-svg-content"><g><rect y="36" width="302" height="30"></rect><rect y="236" width="302" height="30"></rect><rect y="136" width="302" height="30"></rect>
</g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>
            </a>
          </div>
          <div class="u-nav-container">
            <ul class="u-nav u-spacing-25 u-unstyled"><li class="u-nav-item"><a class="u-button-style u-nav-link" href="Predict.html" style="padding: 8px 0px;">Predict</a>
              </li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="About.html" style="padding: 8px 0px;">About</a>
              </li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="Problem.html" style="padding: 8px 0px;">Problem</a>
              </li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="Page-5.html" style="padding: 8px 0px;">Page 5</a>
              </li>
            </ul>
          </div>
          <div class="u-nav-container-collapse">
            <div class="u-black u-container-style u-inner-container-layout u-opacity u-opacity-95 u-sidenav">
              <div class="u-inner-container-layout u-sidenav-overflow">
                <div class="u-menu-close"></div>
                <ul class="u-align-center u-nav u-popupmenu-items u-unstyled u-nav-2"><li class="u-nav-item"><a class="u-button-style u-nav-link" href="Predict.html">Predict</a>
                  </li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="About.html">About</a>
                  </li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="Problem.html">Problem</a>
                  </li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="Page-5.html">Page 5</a>
                  </li>
                </ul>
              </div>
            </div>
            <div class="u-black u-menu-overlay u-opacity u-opacity-70"></div>
          </div>
        </nav>
      </div></header>
    <section class="u-clearfix u-image u-valign-middle-lg u-valign-middle-md u-valign-middle-xs u-valign-top-sm u-valign-top-xl u-section-1" id="carousel_7bd8">
      <div class="u-clearfix u-layout-wrap u-layout-wrap-1">
        <p class="u-text u-text-black u-text-4" spellcheck="false">
            <h3 class="u-text u-text-4" style = "text-align: center;"> <b> <u> NeuraHealth Model Results </u></b></h3>
            <h2 class="u-text u-text-3" id = "date-time" style = "text-align: center; font-size: 1.6em"> </h2> <br> <br>
            
            <div class = "grid-container">
                
                <div class = "grid-item" style = "grid-area: title"> 
                    <h2 class="u-text u-text-3" style = "text-align:center; font-size: 1.6em;"> 
                        <u> <b> Overall Results </b> </u> 
                    </h2> 
                
                </div>
                
                <div class = "grid-item" id = 'prob-container' style = "grid-area: prob; width: 100%">
                    <b> Overall Patient Level Cognitive Impairment Probability: </b>

                    <div class="w3-light-grey w3-round" id = "prob-bar">
                        {% csrf_token %}
                        <div class="w3-container w3-round" id = "p-bar" style="font-size: 3em;" onload="probBar();"> {{ ci_percent }}% </div> <!-- just change 75% to a variable or something-->
                    </div>

                    <div style="font-size: 1.5em;" id = "model-rec">

                    </div>

                </div>

                <div class = "grid-item" id = "notes-area" style = "grid-area: notes"> 
                    
                    <div style = "background-color: #2196f3; display: flex; align-items: center; border-right: 1px solid black;">
                        <b> Number of Patient EHR Notes Found</b> 
                    </div>

                    <div style = "font-size: 3em; display: flex; justify-content: center; align-items: center;">
                        <b> {{ note_count }} </b> 
                    </div>

                </div>

                <div class = "grid-item" id = "seq-area" style = "grid-area: seq">              
                    
                    <div style = "background-color: #2196f3; display: flex; align-items: center; border-right: 1px solid black;">
                        <b> Number of Sequences Generated </b>
                    </div>
                    
                    <div style = "font-size: 3em; display: flex; justify-content: center; align-items: center;">
                        <b> {{ sequence_count }} </b> 
                    </div>
                   

                </div>

                <div class = "grid-item" id = "high-area" style = "grid-area: high-prob">

                    <div style = "background-color: #C1DFDD; display: flex; align-items: center; border-right: 1px solid black;">
                        <b> Sequences with High Probability ( > 50%) of Cognitive Impairment</b>
                    </div>

                    <div style = "font-size: 3em; display: flex; justify-content: center; align-items: center;">
                        <b> {{ high_proba_sequence_count }} </b> 
                    </div>
                    
                </div>
            </div>

            <br> 
            <ul>
                <h2 class="u-text u-text-3" style = "font-size: 1.6em"> <u> <b> Sequence Level Results </b> </u> </h2> <br> 

                <center> <img src = "../../static/images/scatter_plot.png"/> </center>

                <!-- {% load multifor %} -->
                {% for num, pred, no, ntr, yes, keywords, text in sequence_level %}

                <h4 class="u-text u-text-3" style = "font-size: 1.2em"> <u> <b> Sequence # {{ num }} </b> </u> </h4>
                <b> Model Prediction:</b> {{ pred }} <br> 
                <b> Probabilities:</b> Yes: {{ yes }}%, No: {{ no }}%, Neither: {{ ntr }}% <br>
                <b> Keywords:</b> {{ keywords }} <br>
                <b> Text:</b> {{ text | safe }} <br> <br> 
                
                {% endfor %}
            </ul>
        </p>
      </div>
    </section>

    <!-- <footer class="u-clearfix u-footer u-palette-5-dark-3" id="sec-abf8"><div class="u-clearfix u-sheet u-sheet-1">
        <div class="u-clearfix u-expanded-width-lg u-expanded-width-md u-expanded-width-xl u-expanded-width-xs u-gutter-30 u-layout-wrap u-layout-wrap-1">
          <div class="u-gutter-0 u-layout">
            <div class="u-layout-row">
              <div class="u-align-left u-container-style u-layout-cell u-left-cell u-size-20 u-size-20-md u-layout-cell-1">
                <div class="u-container-layout u-valign-top u-container-layout-1">
                  <h6 class="u-text u-text-1">Headline</h6>
                  <p class="u-small-text u-text u-text-variant u-text-2">Sample text. Lorem ipsum dolor sit amet, consectetur adipiscing elit nullam nunc justo sagittis suscipit ultrices.</p>
                </div>
              </div>
              <div class="u-align-left u-container-style u-layout-cell u-size-20 u-size-20-md u-layout-cell-2">
                <div class="u-container-layout u-valign-top u-container-layout-2">
                  <h6 class="u-text u-text-3">Headline</h6>
                  <p class="u-small-text u-text u-text-variant u-text-4">Sample footer text</p>
                </div>
              </div>
              <div class="u-align-left u-container-style u-layout-cell u-right-cell u-size-20 u-size-20-md u-layout-cell-3">
                <div class="u-container-layout u-valign-top u-container-layout-3">
                  <h6 class="u-text u-text-5">Headline</h6>
                  <p class="u-small-text u-text u-text-variant u-text-6">Sample footer text</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer>

    <section class="u-backlink u-clearfix u-grey-80">
      <a class="u-link" href="https://nicepage.com/website-templates" target="_blank">
        <span>Website Templates</span>
      </a>
      <p class="u-text">
        <span>created with</span>
      </p>
      <a class="u-link" href="" target="_blank">
        <span>Website Builder Software</span>
      </a>
    </section> -->
  </body>
</html>
{% endblock content %}
